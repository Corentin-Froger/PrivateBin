name: Automatisation de la production
run-name: ${{ github.actor }} vient de push
on: [push]
env:
  XDEBUG_MODE: coverage
jobs:
  Install:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: php-actions/composer@v6
      - run: sudo make install
      #- run: sudo make test
      
      - uses: php-actions/phpunit@v3
        continue-on-error: true
        with:
           php_extensions: "gd sqlite3 dom json libxml mbstring tokenizer xml xmlwriter zip xdebug"
           version: 9.6.11
           configuration: phpunit.xml

      - run: ./vendor/bin/phpunit --coverage-text=coverage_test.txt
      - run: ./vendor/bin/phpunit --coverage-html=html_coverage
